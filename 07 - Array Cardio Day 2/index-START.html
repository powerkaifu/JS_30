<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Array Cardio ğŸ’ªğŸ’ª</title>
  </head>
  <body>
    <p><em>Psst: have a look at the JavaScript Console</em> ğŸ’</p>
    <script>
      // ## Array Cardio Day 2

      const people = [
        { name: 'Wes', year: 1988 },
        { name: 'Kait', year: 1986 },
        { name: 'Irv', year: 1970 },
        { name: 'Lux', year: 2015 },
      ]

      const comments = [
        { text: 'Love this!', id: 523423 },
        { text: 'Super good', id: 823423 },
        { text: 'You are the best', id: 2039842 },
        { text: 'Ramen is my fav food ever', id: 123523 },
        { text: 'Nice Nice Nice!', id: 542328 },
      ]

      // Some and Every Checks
      // Array.prototype.some() // is at least one person 19 or older?
      // Array.prototype.every() // is everyone 19 or older?

      // some å…¶ä¸­ä¸€å€‹æˆç«‹å›å‚³ true
      const ans_some = people.some(p => new Date().getFullYear() - p.year >= 19)

      console.log(ans_some) // true

      // every æ¯ä¸€å€‹æˆç«‹å›å‚³ trueï¼Œä¸€å€‹ä¸æˆç«‹å›å‚³ false
      const ans_every = people.every(p => new Date().getFullYear() - p.year >= 19)
      console.log(ans_every) // false

      // Array.prototype.find()
      // Find is like filter, but instead returns just the one you are looking for
      // find the comment with the ID of 823423
      // find å›å‚³ç¬¦åˆæ¢ä»¶çš„ç¬¬ä¸€ç­†è³‡æ–™ï¼Œç¬¬äºŒç­†å°±ä¸æœƒ
      const ans_find = comments.find(comment => comment.id === 823423)
      console.log(ans_find)

      // find é©åˆç”¨åœ¨æ›´æ–°è³‡æ–™ï¼Œæ‰¾åˆ°ä¸€ç­†å¾Œæ›´æ–°
      let cart = [
        { id: 1, count: 1 },
        { id: 2, count: 1 },
        { id: 3, count: 1 },
        { id: 4, count: 1 },
      ]
      const item = cart.find(item => item.id === 3)
      item.count = 5
      console.log(cart) // id:3 count è¢«ä¿®æ”¹ç‚º 5

      // let newCart = cart.slice(0)
      // newCart.splice(0, 1)
      // console.log('cart:', cart, 'newCart:', newCart)

      // newCart æ˜¯æ–°é™£åˆ—ï¼Œèˆ‡cartæ˜¯ä¸åŒé™£åˆ—ï¼Œä½†æ“ä½œç‰©ä»¶è³‡æ–™éƒ½æ˜¯æŒ‡å‘åŒä¸€å€‹ï¼Œä¹Ÿå°±æ˜¯é™£åˆ—æ˜¯æ–°çš„ï¼Œç‰©ä»¶æ˜¯èˆŠçš„
      let newCart = cart.slice(0)
      console.log(cart === newCart) // false,ä¸åŒé™£åˆ—
      console.log(cart[0] === newCart[0]) // true,ç›¸åŒçš„ç‰©ä»¶è³‡æ–™

      // åœ¨æœªåˆªé™¤å‰ä¿®æ”¹ cart[0] è³‡æ–™ï¼Œcartã€newCart éƒ½æœƒæ”¹è®Š
      newCart[0].count = 10
      console.log('cart[0]:', cart[0], 'newCart[0]', newCart[0])

      // åˆªé™¤ newCart ç¬¬ä¸€ç­†è³‡æ–™
      newCart.splice(0, 1)
      //æœƒç™¼ç¾ newCart å°‘ä¸€ç­†ï¼Œä½† cart ä¸æœƒè¢«åˆªé™¤
      console.log('cart:', cart, 'newCart:', newCart)

      // Array.prototype.findIndex()
      // Find the comment with this ID
      // delete the comment with the ID of 823423
      // findIndex é©åˆç”¨åœ¨åˆªé™¤è³‡æ–™ã€‚
      const ans_findIndex = comments.findIndex(comment => comment.id === 823423)
      console.log(ans_findIndex)

      // é™£åˆ—æ“ä½œï¼Œslice èˆ‡ splice çš„ä½¿ç”¨ç‡å¾ˆé«˜
      // splice æœƒå°åŸå§‹è³‡æ–™åšæ“ä½œï¼Œå¯ä»¥æ–°å¢æˆ–åˆªé™¤å…ƒç´ 
      // const ans_splice = comments.splice(ans_findIndex, 1)
      // console.log(comments)
      // slice
      // const ans_slice1 = comments.slice(0, ans_findIndex)
      // const ans_slice2 = comments.slice(ans_findIndex + 1)
      // console.log(ans_slice1, ans_slice2, comments)

      // ç”¨ slice è¤‡è£½ä¸€å€‹æ–°é™£åˆ—å‡ºä¾†
      const newArray = comments.slice(0)
      // å†ç”¨ splice åˆªæ‰ä¸è¦çš„é™£åˆ—å…ƒç´ 
      newArray.splice(ans_findIndex, 1)
      console.table(newArray, comments)

      // PS:æ“ä½œè³‡æ–™ä¸è¦å‹•åˆ°åŸå§‹è³‡æ–™ï¼Œè¤‡è£½ä¸€ä»½å‡ºä¾†å†åšæ“ä½œ
      // PS:Object.assign æœƒè¤‡è£½ç‰©ä»¶ï¼Œæˆ–æ˜¯ç‰©ä»¶è½‰å­—ä¸²ï¼Œå†è½‰å›ç‰©ä»¶ä¹Ÿæœƒæ˜¯æ–°çš„
      let obj1 = { count: 1 }
      let obj2 = obj1 // obj1,obj2æ˜¯æŒ‡å‘ç›¸åŒç‰©ä»¶
      let obj3 = Object.assign({}, obj2) // obj3 æ˜¯æ–°ç‰©ä»¶ï¼Œè¤‡è£½ obj2
      let obj4 = JSON.parse(JSON.stringify(obj3)) // obj4 æ˜¯æ–°ç‰©ä»¶ï¼Œè½‰å­—ä¸²å¾Œå†è½‰å› JSON ç‰©ä»¶
      obj1.count = 5
      console.log(obj1.count, obj2.count, obj3.count, obj4.count) // 5,5,1,1

      // ä½¿ç”¨JSONè½‰å­—ä¸²å†è½‰ç‰©ä»¶çš„æ–¹å¼ï¼Œè¤‡è£½ä¸€å€‹æ–°çš„é™£åˆ—åŒ…ç‰©ä»¶ï¼Œç‰©ä»¶è³‡æ–™ä¹Ÿä¸ä¸€æ¨£ï¼Œè³‡æ–™ä¸èƒ½æœ‰functionï¼Œåªé©åˆç´”è³‡æ–™
      let ary = [{ name: 'KaiFu' }, { name: 'Hello' }]
      let ary1 = JSON.parse(JSON.stringify(ary))
      console.log(ary[0] === ary1[0])

      // å¦ä¸€ç¨® map æ­é… Object.assign
      let ary2 = ary.map(item => {
        return Object.assign({}, item)
      })
    </script>
  </body>
</html>
